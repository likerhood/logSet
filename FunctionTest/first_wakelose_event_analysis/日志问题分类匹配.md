## 日志问题分析

有一个很有意思的地方，只有收到一级唤醒事件，才能得到唤醒方案和相关算法。

### 1. 未收到一级唤醒事件
四种方案通用
未查询到关键日志点‘onRecognition:’，则标记为：未接收到一级事件
```bash
(高通/自研E) D/SVA-LegacyWakeupSession - onRecognition: recognitionEvent = KeyphraseRecognitionEvent [keyphraseExtras=[KeyphraseRecognitionExtra [id=0, recognitionModes=3, coarseConfidenceLevel=98, confidenceLevels=[ConfidenceLevel [userId=1, confidenceLevel=14]]]], status=0, soundModelHandle=1, captureAvailable=true, captureSession=25, captureDelayMs=0, capturePreambleMs=0, triggerInData=false, sampleRate=16000, encoding=2, channelMask=16, data=8944]
(MTK) V/VoiceTriggerManager - onRecognition: GenericRecognitionEvent ::RecognitionEvent [status=0, soundModelHandle=-1, captureAvailable=false, captureSession=-1, captureDelayMs=-1, capturePreambleMs=-1, triggerInData=false, sampleRate=16000, encoding=2, channelMask=1, data=0]
(MTK自研) V/MTKVoiceTriggerManager - onRecognition: GenericRecognitionEvent ::RecognitionEvent [status=0, soundModelHandle=-1, captureAvailable=false, captureSession=297, captureDelayMs=8704, capturePreambleMs=-1, triggerInData=false, sampleRate=16000, encoding=2, channelMask=1, data=0] false
```



### 2. 一级唤醒事件失败

只适用于高通方案
查询到关键日志点‘final_result=false’，则标记为：未通过一级
```bash
final_result=false, first_stage_detect= true, cnn_detect= false, vop_detect=false；---唤醒词、声纹均验证不通过（与柳军确认，cnn/vop检测不分先后，任意一个false，就不会再去验证另一个）
final_result=false, first_stage_detect= true, cnn_detect= false, vop_detect=true；---唤醒词验证不通过
final_result=false, first_stage_detect=true, cnn_detect=true, vop_detect=false；---声纹检测不通过
final_result= true, first_stage_detect=true, cnn_detect= true, vop_detect=true；---验证通过
```


### 3. 非正常一级事件
查询到一次‘onRecognition: recognitionEvent’事件后，发现其采样率‘sampleRate=0’、数据都有问题，则输出：非正常一级事件
```bash
D/SVA-LegacyWakeupSession - onRecognition: recognitionEvent = 
KeyphraseRecognitionEvent [keyphraseExtras=[], status=1, 
soundModelHandle=2, captureAvailable=true, captureSession=0, 
captureDelayMs=0, capturePreambleMs=0, triggerInData=false, 
sampleRate=0, encoding=0, channelMask=0, data=0]
```


### 3. 二级唤醒事件失败
#### 3.1 二级引擎不通过
- 日志定位
**该日志点目前仅自研方案存在**
    - 先定位到：‘PhraseWakeupResult’；
    - 再定位到：‘isVoconWakeupPassed’和‘isVBPassed’
该条日志共四种情况：
1. 若isVoconWakeupPassed=true、isVBPassed=true，则通过二级引擎
```bash
D/MIXWVPCallback - PhraseWakeupResult{mVoconPhrase='小爱同学', 
isVoconWakeupPassed=true, mWakeupStartTime=-1, mWakeupEndTime=-1, 
mScore=23.421255, isAec=false, isVBPassed=true, mWakeupResultStart=1084, 
mWakeupResultEnd=1232}
```

2. 若isVoconWakeupPassed=false、isVBPassed=true，则标记为：未通过二级唤醒引擎
```bash
D/MIXWVPCallback - PhraseWakeupResult{mVoconPhrase='小爱同学', 
isVoconWakeupPassed=false, mWakeupStartTime=-1, mWakeupEndTime=-1, 
mScore=0.0, isAec=false, isVBPassed=true, mWakeupResultStart=0, 
mWakeupResultEnd=0}
```

3. 若isVoconWakeupPassed=true、isVBPassed=false，则标记为：未通过二级声纹引擎
```bash
D/MIXWVPCallback - PhraseWakeupResult{mVoconPhrase='小爱同学', 
isVoconWakeupPassed=true, mWakeupStartTime=-1, mWakeupEndTime=-1, 
mScore=29.038092, isAec=false, isVBPassed=false, mWakeupResultStart=552, 
mWakeupResultEnd=641}
```

4. 若isVoconWakeupPassed=true、isVBPassed=false，则标记为：未通过二级唤醒引擎及声纹引擎
```bash
D/MIXWVPCallback - PhraseWakeupResult{mVoconPhrase='小爱同学', 
isVoconWakeupPassed=false, mWakeupStartTime=-1, mWakeupEndTime=-1, 
mScore=0.0, isAec=false, isVBPassed=false, mWakeupResultStart=0, 
mWakeupResultEnd=0}
```




